{"version":3,"sources":["services/personDB.js","components/PersonForm.js","components/Filter.js","components/PersonList.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","updatedPerson","put","delete","PersonForm","props","className","onSubmit","addPerson","value","nameValue","onChange","handleNameChange","numberValue","handleNumberChange","type","Filter","filterByName","PersonList","filteredPersons","map","person","name","number","onClick","removePerson","Notification","notification","state","message","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterName","setFilterName","setNotification","useEffect","personDB","initialContacts","console","log","length","updatePerson","window","confirm","find","p","returnedContact","setTimeout","catch","error","filter","toLowerCase","includes","event","target","preventDefault","some","concat","deleteId","parseInt","deleteName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bf110e36.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n}\n\nconst create = newPerson => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then(response => response.data);\n}\n\nconst update = (id, updatedPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, updatedPerson);\n  return request.then(response => response.data);\n}\n\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data);\n} \n\nexport default { getAll, create, update, remove }","import React from \"react\";\n\nconst PersonForm = (props) => {\n  return (\n    <form className=\"form\" onSubmit={props.addPerson}>\n      <div className=\"form-item\">\n        Name: <input value={props.nameValue} onChange={props.handleNameChange} />\n      </div>\n      <div className=\"form-item\">\n        Number: <input value={props.numberValue} onChange={props.handleNumberChange} />\n      </div>\n      <div className=\"form-button\">\n        <button type=\"submit\">Add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default PersonForm;","import React from \"react\";\n\nconst Filter = (props) => {\n  return (\n    <div>\n      Type name to filter: <input onChange={props.filterByName} />\n    </div>\n  );\n\n}\n\nexport default Filter;","import React from \"react\";\n\nconst PersonList = (props) => {\n  return (\n    <ul className=\"contact-list\">\n      {props.filteredPersons.map(person => \n      <li className=\"contact-list-item\" key={person.id}>\n        {`${person.name} ${person.number} `}\n        <button value={person.id} onClick={props.removePerson}>Delete</button>\n      </li>\n      )}\n    </ul>\n  );\n}\n\nexport default PersonList;","import React from \"react\";\n\nconst Notification = ({ notification }) => {\n\n  if (notification.state === null) {\n    return null;\n  }\n  if(notification.state === 'success') {\n    return <div className=\"notification success\">{notification.message}</div>;\n  }\n  if(notification.state === 'danger') {\n    return <div className=\"notification danger\">{notification.message}</div>;\n  }\n  \n\n}\n\nexport default Notification;","import React, { useState, useEffect, useRef } from 'react'\nimport personDB from './services/personDB';\nimport PersonForm from './components/PersonForm';\nimport Filter from './components/Filter';\nimport PersonList from './components/PersonList';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filterName, setFilterName ] = useState('');\n  const [ notification, setNotification ] = useState({state: null, message: ''});\n\n  // Get contacts from server\n  useEffect(() => {\n    personDB\n      .getAll()\n      .then(initialContacts => {\n        console.log('%c promise fulfilled, got contacts:', 'color: green;');\n        setPersons(initialContacts);\n      })\n  },[]);\n  console.log('render', persons.length, 'contacts');\n\n  // Add contact\n  const addPerson = event => {\n    event.preventDefault();\n    const person = {\n      name: newName,\n      number: newNumber, \n    }\n\n    persons.some(p => p.name === newName)\n    ? updatePerson(newName, newNumber)\n    : personDB\n        .create(person)\n        .then(returnedContact => {\n          setPersons(persons.concat(returnedContact));\n          setNewName('');\n          setNewNumber('');\n          setNotification({state: 'success', message: `Added ${returnedContact.name} ðŸ‘`});\n          setTimeout(() => setNotification({state: null}), 5000);\n        })  \n  }\n\n  // Update contact\n  const updatePerson = (newName, newNumber) => {\n    if (window.confirm(`${newName} is already added to phonebook. Replace the old number with a new one?`)) {\n      const person = persons.find(p => p.name === newName);\n      const updatedPerson = {...person, number: newNumber}\n      \n      personDB\n        .update(person.id, updatedPerson)\n        .then(returnedContact => {\n          setPersons(persons.map(p => {\n            console.log(p.id);\n            console.log(person.id);\n            return p.id !== person.id ? p : returnedContact;\n          }));\n          setNewName('');\n          setNewNumber('');\n          setNotification({state: 'success', message: `Updated ${returnedContact.name}'s info ðŸ‘`});\n          setTimeout(() => setNotification({state: null}), 5000);\n        })\n        .catch(error => {\n          setNotification({state: 'danger', message: `The information of ${newName} has already been deleted.`});\n          setTimeout(() => setNotification({state: null}), 5000)\n          setPersons(persons.filter(p => p.id !== person.id));\n        });\n    }\n  }\n\n  // Remove contact\n  const removePerson = event => {\n    event.preventDefault();\n    const deleteId = parseInt(event.target.value);\n    const deleteName = persons.find(p => p.id === deleteId).name;\n    \n    if (window.confirm(`Do you really want to remove ${deleteName}?`)) {\n    personDB\n      .remove(event.target.value)\n      .then(() => {\n        setPersons(persons.filter(p => p.id !== deleteId));\n        setNotification({state: 'success', message: `Deleted ${deleteName}`});\n        setTimeout(() => setNotification({state: null}), 5000);\n      })\n      .catch(error => {\n        console.log('Contact has already been removed.', error);\n        setNotification({state: 'danger', message: `The information of ${deleteName} has already been deleted.`});\n        setTimeout(() => setNotification({state: null}), 5000);\n        setPersons(persons.filter(p => p.id !== deleteId));\n      })\n    }\n  }\n  \n  // Filter phonebook\n  const filterByName = event => {\n    setFilterName(event.target.value.toLowerCase());\n  }\n  const filteredPersons = persons.filter(\n    person => person.name.toLowerCase().includes(filterName)\n  );\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <Notification notification={notification} />\n      <h1>Phonebook</h1>\n      <Filter filterByName={filterByName} />\n      <h2>Add / update contacts</h2>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson}\n        nameValue={newName}\n        numberValue={newNumber}\n      />\n      <h2>All contacts</h2>\n      <PersonList\n        filteredPersons={filteredPersons} \n        removePerson={removePerson}\n      />\n    </div>\n  );\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}