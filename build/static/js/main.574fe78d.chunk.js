(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(17),c=n.n(a),o=n(8),r=n(3),s=n(2),i=n(4),u=n.n(i),l="https://immense-beach-23795.herokuapp.com/api/persons",d=function(){return u.a.get(l).then((function(e){return e.data}))},f=function(e){return u.a.post(l,e).then((function(e){return e.data}))},m=function(e,t){return u.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return u.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=n(0),h=function(e){return Object(j.jsxs)("form",{className:"form",onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{className:"form-item",children:["Name: ",Object(j.jsx)("input",{value:e.nameValue,onChange:e.handleNameChange})]}),Object(j.jsxs)("div",{className:"form-item",children:["Number: ",Object(j.jsx)("input",{value:e.numberValue,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{className:"form-button",children:Object(j.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(e){return Object(j.jsxs)("div",{children:["Type name to filter: ",Object(j.jsx)("input",{onChange:e.filterByName})]})},g=function(e){return Object(j.jsx)("ul",{className:"contact-list",children:e.filteredPersons.map((function(t){return Object(j.jsxs)("li",{className:"contact-list-item",children:["".concat(t.name," ").concat(t.number," "),Object(j.jsx)("button",{value:t.id,onClick:e.removePerson,children:"Delete"})]},t.id)}))})},p=function(e){var t=e.notification;return null===t.state?null:"success"===t.state?Object(j.jsx)("div",{className:"notification success",children:t.message}):"danger"===t.state?Object(j.jsx)("div",{className:"notification danger",children:t.message}):void 0},v=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),i=Object(r.a)(c,2),u=i[0],l=i[1],v=Object(s.useState)(""),x=Object(r.a)(v,2),N=x[0],w=x[1],y=Object(s.useState)(""),C=Object(r.a)(y,2),k=C[0],T=C[1],P=Object(s.useState)({state:null,message:""}),S=Object(r.a)(P,2),D=S[0],A=S[1];Object(s.useEffect)((function(){d().then((function(e){console.log("%c promise fulfilled, got contacts:","color: green;"),a(e)}))}),[]),console.log("render",n.length,"contacts");var V=function(e,t){if(window.confirm("".concat(e," is already added to phonebook. Replace the old number with a new one?"))){var c=n.find((function(t){return t.name===e})),r=Object(o.a)(Object(o.a)({},c),{},{number:t});m(c.id,r).then((function(e){a(n.map((function(t){return console.log(t.id),console.log(c.id),t.id!==c.id?t:e}))),l(""),w(""),A({state:"success",message:"Updated ".concat(e.name,"'s info \ud83d\udc4d")}),setTimeout((function(){return A({state:null})}),5e3)})).catch((function(t){A({state:"danger",message:"The information of ".concat(e," has already been deleted.")}),setTimeout((function(){return A({state:null})}),5e3),a(n.filter((function(e){return e.id!==c.id})))}))}},B=n.filter((function(e){return e.name.toLowerCase().includes(k)}));return Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)(p,{notification:D}),Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(O,{filterByName:function(e){T(e.target.value.toLowerCase())}}),Object(j.jsx)("h2",{children:"Add / update contacts"}),Object(j.jsx)(h,{handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){w(e.target.value)},addPerson:function(e){e.preventDefault();var t={name:u,number:N};n.some((function(e){return e.name===u}))?V(u,N):f(t).then((function(e){a(n.concat(e)),l(""),w(""),A({state:"success",message:"Added ".concat(e.name," \ud83d\udc4d")}),setTimeout((function(){return A({state:null})}),5e3)}))},nameValue:u,numberValue:N}),Object(j.jsx)("h2",{children:"All contacts"}),Object(j.jsx)(g,{filteredPersons:B,removePerson:function(e){e.preventDefault();var t=parseInt(e.target.value),c=n.find((function(e){return e.id===t})).name;window.confirm("Do you really want to remove ".concat(c,"?"))&&b(e.target.value).then((function(){a(n.filter((function(e){return e.id!==t}))),A({state:"success",message:"Deleted ".concat(c)}),setTimeout((function(){return A({state:null})}),5e3)})).catch((function(e){console.log("Contact has already been removed.",e),A({state:"danger",message:"The information of ".concat(c," has already been deleted.")}),setTimeout((function(){return A({state:null})}),5e3),a(n.filter((function(e){return e.id!==t})))}))}})]})};n(41);c.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.574fe78d.chunk.js.map